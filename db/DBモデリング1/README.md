## 課題１

下記が作成したER図。

![ER図](./ER/DM%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B01%E8%AA%B2%E9%A1%8C1.png)

## 課題２

### 今後はわさびの有無のみならずシャリの大小も選べるようになりました。どのようにテーブル設計をするべきでしょうか?

order_detailsテーブルに下記カラム追加
shari_size: integer

今後シャリのサイズが大小以外も追加される可能性を考えて、integer型で作成。
enumを用いて、管理予定。

![ER図](./ER/DB%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B01%E8%AA%B2%E9%A1%8C2.png)

**疑問点**<br>
Railsではステータス的なフラグはenumを用いて使うが、他だと使わない？
ステータスは別テーブルに分離する？

### 人気の寿司ネタを特定したいので、「はな」「わだつみ」などのセット商品の売り上げとは別に、寿司ネタが毎月何個売れているのか知る必要が生じました。どのようにテーブル設計をするべきでしょうか?

現状の order_details テーブルで対応できそう。
food_idでグルーピングして、foodごとの総量をSUM関数で求める
下記のようなクエリで取ることを想定。

```sql
SELECT food_id, SUM(quantity)
FROM order_details
WHERE
  food_id IS NOT NULL AND
  BETWEEN 月初 AND 月末
GROUP BY food_id
```

## 課題３

### クーポンを利用して割引を適用できるようにしたい。

下記ユースケースを想定
クーポンを使用する -> 合計価格から何割引きかになる
クーポンは複数種類ある。
1度に使えるクーポンは一つまで。

![ER図](./ER/DB%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B01%E8%AA%B2%E9%A1%8C3.png)

couponsテーブル、coupon_ordersテーブルを新しく追加した。

## 課題４
